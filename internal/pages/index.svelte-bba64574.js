var B=Object.defineProperty,D=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var I=(r,a,e)=>a in r?B(r,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[a]=e,C=(r,a)=>{for(var e in a||(a={}))V.call(a,e)&&I(r,e,a[e]);if(S)for(var e of S(a))$.call(a,e)&&I(r,e,a[e]);return r},P=(r,a)=>D(r,N(a));import{S as x,i as O,s as U,e as _,k as R,c as h,a as k,m as E,d as p,b as u,K as z,g as q,J as v,L as Y,n as G,M as A}from"../chunks/index-dd47dd75.js";import{g as F,a as H}from"../chunks/nCardGame-64515d16.js";function M(r,a,e){const i=r.slice();return i[12]=a[e],i[14]=e,i}function T(r){let a,e,i,l,s,n,t,d,f,w,m,y,b;return{c(){a=_("div"),e=_("button"),i=_("img"),s=R(),n=_("img"),m=R(),this.h()},l(o){a=h(o,"DIV",{class:!0});var c=k(a);e=h(c,"BUTTON",{class:!0,title:!0,"aria-label":!0,"data-target-idx":!0});var g=k(e);i=h(g,"IMG",{class:!0,src:!0,alt:!0}),s=E(g),n=h(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(p),m=E(c),c.forEach(p),this.h()},h(){u(i,"class","face back svelte-1tr9zky"),z(i.src,l=r[1])||u(i,"src",l),u(i,"alt","Back face"),u(n,"class","face front svelte-1tr9zky"),z(n.src,t=r[12].img)||u(n,"src",t),u(n,"alt","Front face"),u(e,"class",d="card "+(r[12].revealed?"revealed":"")+" svelte-1tr9zky"),u(e,"title",f=r[12].name),u(e,"aria-label","Card"),u(e,"data-target-idx",w=r[14]),u(a,"class","card-wrapper svelte-1tr9zky")},m(o,c){q(o,a,c),v(a,e),v(e,i),v(e,s),v(e,n),v(a,m),y||(b=Y(e,"click",r[2]),y=!0)},p(o,c){c&1&&!z(n.src,t=o[12].img)&&u(n,"src",t),c&1&&d!==(d="card "+(o[12].revealed?"revealed":"")+" svelte-1tr9zky")&&u(e,"class",d),c&1&&f!==(f=o[12].name)&&u(e,"title",f)},d(o){o&&p(a),y=!1,b()}}}function J(r){let a,e,i=r[0],l=[];for(let s=0;s<i.length;s+=1)l[s]=T(M(r,i,s));return{c(){a=_("div"),e=_("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){a=h(s,"DIV",{class:!0});var n=k(a);e=h(n,"DIV",{class:!0});var t=k(e);for(let d=0;d<l.length;d+=1)l[d].l(t);t.forEach(p),n.forEach(p),this.h()},h(){u(e,"class","cards-board svelte-1tr9zky"),u(a,"class","memory-game svelte-1tr9zky")},m(s,n){q(s,a,n),v(a,e);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(s,[n]){if(n&7){i=s[0];let t;for(t=0;t<i.length;t+=1){const d=M(s,i,t);l[t]?l[t].p(d,n):(l[t]=T(d),l[t].c(),l[t].m(e,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=i.length}},i:G,o:G,d(s){s&&p(a),A(l,s)}}}function K(r,a,e){const i=H(),l=F();let s=!1,n=new Set,t=new Set,d=m();async function f(o,c="normal"){s=!0,await o.animate([{transform:"rotateY(0.5turn)"},{transform:"rotateY(2turn)"}],{duration:1e3,easing:"ease",direction:c}).finished,s=!1}function w(){return new Set([...t].map(c=>l[c].type)).size===1}function m(){return l.map((o,c)=>P(C({},o),{revealed:n.has(c)||t.has(c)}))}async function y(o,c){t.size===2||s||(console.log("Revealing..."),await f(o),t=new Set([...t,c]),e(0,d=m()),console.log("Revealed..."),console.log("Ready for more"),t.size===2&&(w()?(n=new Set([...n,...t]),t=new Set,console.log("RIGHT!!! congrats!")):(console.log("WRONG!!!! resetting play"),await Promise.all([...t].map(g=>f(document.querySelector(`.card[data-target-idx="${g}"]`),"reverse"))),t=new Set,console.log("Play resetted")),e(0,d=m())))}function b(o){const c=o.currentTarget;y(c,Number(c.dataset.targetIdx))}return[d,i,b]}class Q extends x{constructor(a){super(),O(this,a,K,J,U,{})}}export{Q as default};
