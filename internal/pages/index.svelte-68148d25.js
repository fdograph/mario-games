var x=Object.defineProperty,z=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var P=(l,a,e)=>a in l?x(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,C=(l,a)=>{for(var e in a||(a={}))N.call(a,e)&&P(l,e,a[e]);if(I)for(var e of I(a))V.call(a,e)&&P(l,e,a[e]);return l},R=(l,a)=>z(l,D(a));import{S as $,i as O,s as U,e as _,k as q,c as h,a as w,m as B,d as p,b as u,K as S,g as T,J as v,L as Y,n as E,M as A}from"../chunks/index-dd47dd75.js";import{g as F,a as H}from"../chunks/nCardGame-64515d16.js";function G(l,a,e){const i=l.slice();return i[12]=a[e],i[14]=e,i}function M(l){let a,e,i,r,s,n,t,d,f,k,m,y,b;return{c(){a=_("div"),e=_("button"),i=_("img"),s=q(),n=_("img"),m=q(),this.h()},l(c){a=h(c,"DIV",{class:!0});var o=w(a);e=h(o,"BUTTON",{class:!0,title:!0,"aria-label":!0,"data-target-idx":!0});var g=w(e);i=h(g,"IMG",{class:!0,src:!0,alt:!0}),s=B(g),n=h(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(p),m=B(o),o.forEach(p),this.h()},h(){u(i,"class","face back svelte-7sylvo"),S(i.src,r=l[1])||u(i,"src",r),u(i,"alt","Back face"),u(n,"class","face front svelte-7sylvo"),S(n.src,t=l[12].img)||u(n,"src",t),u(n,"alt","Front face"),u(e,"class",d="card "+(l[12].revealed?"revealed":"")+" svelte-7sylvo"),u(e,"title",f=l[12].name),u(e,"aria-label","Card"),u(e,"data-target-idx",k=l[14]),u(a,"class","card-wrapper svelte-7sylvo")},m(c,o){T(c,a,o),v(a,e),v(e,i),v(e,s),v(e,n),v(a,m),y||(b=Y(e,"click",l[2]),y=!0)},p(c,o){o&1&&!S(n.src,t=c[12].img)&&u(n,"src",t),o&1&&d!==(d="card "+(c[12].revealed?"revealed":"")+" svelte-7sylvo")&&u(e,"class",d),o&1&&f!==(f=c[12].name)&&u(e,"title",f)},d(c){c&&p(a),y=!1,b()}}}function J(l){let a,e,i=l[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=M(G(l,i,s));return{c(){a=_("div"),e=_("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){a=h(s,"DIV",{class:!0});var n=w(a);e=h(n,"DIV",{class:!0});var t=w(e);for(let d=0;d<r.length;d+=1)r[d].l(t);t.forEach(p),n.forEach(p),this.h()},h(){u(e,"class","cards-board svelte-7sylvo"),u(a,"class","memory-game svelte-7sylvo")},m(s,n){T(s,a,n),v(a,e);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(s,[n]){if(n&7){i=s[0];let t;for(t=0;t<i.length;t+=1){const d=G(s,i,t);r[t]?r[t].p(d,n):(r[t]=M(d),r[t].c(),r[t].m(e,null))}for(;t<r.length;t+=1)r[t].d(1);r.length=i.length}},i:E,o:E,d(s){s&&p(a),A(r,s)}}}async function K(){return document.querySelector(".memory-game").animate([{backgroundPosition:"0 center"},{backgroundPosition:" 100px center"}],{duration:150,easing:"steps(2)",direction:"normal",iterations:10}).finished}function L(l,a,e){const i=H(),r=F();let s=!1,n=new Set,t=new Set,d=m();async function f(c,o="normal"){s=!0,await c.animate([{transform:"rotateY(0.5turn)"},{transform:"rotateY(2turn)"}],{duration:1e3,easing:"ease",direction:o}).finished,s=!1}function k(){return new Set([...t].map(o=>r[o].type)).size===1}function m(){return r.map((c,o)=>R(C({},c),{revealed:n.has(o)||t.has(o)}))}async function y(c,o){t.size===2||s||(console.log("Revealing..."),await f(c),t=new Set([...t,o]),e(0,d=m()),console.log("Revealed..."),console.log("Ready for more"),t.size===2&&(k()?(n=new Set([...n,...t]),t=new Set,await K(),console.log("RIGHT!!! congrats!")):(console.log("WRONG!!!! resetting play"),await Promise.all([...t].map(g=>f(document.querySelector(`.card[data-target-idx="${g}"]`),"reverse"))),t=new Set,console.log("Play resetted")),e(0,d=m())))}function b(c){const o=c.currentTarget;y(o,Number(o.dataset.targetIdx))}return[d,i,b]}class X extends ${constructor(a){super(),O(this,a,L,J,U,{})}}export{X as default};
